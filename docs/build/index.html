<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Incertus.jl · Incertus</title><meta name="title" content="Incertus.jl · Incertus"/><meta property="og:title" content="Incertus.jl · Incertus"/><meta property="twitter:title" content="Incertus.jl · Incertus"/><meta name="description" content="Documentation for Incertus."/><meta property="og:description" content="Documentation for Incertus."/><meta property="twitter:description" content="Documentation for Incertus."/><script data-outdated-warner src="assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="search_index.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>Incertus</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Incertus.jl</a><ul class="internal"><li class="toplevel"><a class="tocitem" href="#Randomization,-targeting-*equal*-1:1-allocation"><span>Randomization, targeting <em>equal</em>  <code>1:1</code> allocation</span></a></li><li class="toplevel"><a class="tocitem" href="#Randomization,-targeting-*unequal*-allocation-in-*two-arm*-trial-and-*equal*/*unequal*-allocation-in-*multi-arm*-trial"><span>Randomization, targeting <em>unequal</em> allocation in <em>two-arm</em> trial and <em>equal</em>/<em>unequal</em> allocation in <em>multi-arm</em> trial</span></a></li><li class="toplevel"><a class="tocitem" href="#Procedures-implemented-in-the-package"><span>Procedures implemented in the package</span></a></li><li><a class="tocitem" href="#Completely-Randomized-Design-(CRD)"><span>Completely Randomized Design (CRD)</span></a></li><li><a class="tocitem" href="#Permuted-Block-Design-(PBD)"><span>Permuted Block Design (PBD)</span></a></li><li><a class="tocitem" href="#Random-Allocation-Rule-(Rand)"><span>Random Allocation Rule (Rand)</span></a></li><li><a class="tocitem" href="#Truncated-Binomial-Design-(TBD)"><span>Truncated Binomial Design (TBD)</span></a></li><li><a class="tocitem" href="#Efron&#39;s-Biased-Coin-Design-(EBCD)"><span>Efron&#39;s Biased Coin Design (EBCD)</span></a></li><li><a class="tocitem" href="#Adjustable-Biased-Coin-Design-(ABCD)"><span>Adjustable Biased Coin Design (ABCD)</span></a></li><li><a class="tocitem" href="#Generalized-Biased-Coin-Design-(GBCD)"><span>Generalized Biased Coin Design (GBCD)</span></a></li><li><a class="tocitem" href="#Big-Stick-Design-(BSD)"><span>Big Stick Design (BSD)</span></a></li><li><a class="tocitem" href="#Biased-Coin-Design-With-Imbalance-Tolerance-(BCDWIT)"><span>Biased Coin Design With Imbalance Tolerance (BCDWIT)</span></a></li><li><a class="tocitem" href="#Block-Urn-Design-(BUD)"><span>Block Urn Design (BUD)</span></a></li><li><a class="tocitem" href="#Ehrenfest-Urn-Design-(EUD)"><span>Ehrenfest Urn Design (EUD)</span></a></li><li class="toplevel"><a class="tocitem" href="#Funcions-implemented-to-calculate-allocation-probabilities"><span>Funcions implemented to calculate allocation probabilities</span></a></li><li class="toplevel"><a class="tocitem" href="#Simulation"><span>Simulation</span></a></li><li class="toplevel"><a class="tocitem" href="#Operational-characteristics"><span>Operational characteristics</span></a></li><li><a class="tocitem" href="#Expected-absolute-imbalance"><span>Expected absolute imbalance</span></a></li><li><a class="tocitem" href="#Variance-of-imbalance"><span>Variance of imbalance</span></a></li><li><a class="tocitem" href="#Expected-maximum-imbalance-over-first-allocation-steps"><span>Expected maximum imbalance over first allocation steps</span></a></li><li><a class="tocitem" href="#Expected-maximum-imbalance-over-first-allocation-steps-2"><span>Expected maximum imbalance over first allocation steps</span></a></li><li class="toplevel"><a class="tocitem" href="#Auxiliary-functions"><span>Auxiliary functions</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Incertus.jl</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Incertus.jl</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/yevgenryeznik/Incertus.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/yevgenryeznik/Incertus.jl/blob/main/docs/src/index.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Incertus.jl"><a class="docs-heading-anchor" href="#Incertus.jl">Incertus.jl</a><a id="Incertus.jl-1"></a><a class="docs-heading-anchor-permalink" href="#Incertus.jl" title="Permalink"></a></h1><p>The package implements several <em>restricted randomization</em> procedures for <em>two-</em> and <em>multi-arm</em> clinical trials, targeting <em>equal</em> or <em>unequal allocation</em>. </p><h1 id="Randomization,-targeting-*equal*-1:1-allocation"><a class="docs-heading-anchor" href="#Randomization,-targeting-*equal*-1:1-allocation">Randomization, targeting <em>equal</em>  <code>1:1</code> allocation</a><a id="Randomization,-targeting-*equal*-1:1-allocation-1"></a><a class="docs-heading-anchor-permalink" href="#Randomization,-targeting-*equal*-1:1-allocation" title="Permalink"></a></h1><p>The following settings are assumed:</p><ul><li>There are two <em>treatment arms</em> investigated in a trial:<ul><li><span>$E$</span> is an <em>experimental</em> treatment arm.</li><li><span>$C$</span> is a <em>control</em> treatment arm.</li></ul></li><li><span>$n$</span> is a total <em>sample size</em>.</li><li><span>$N_1(j)$</span> and <span>$N_2(j)$</span> are <em>treatment numbers</em>, i.e., <em>sample sizes</em> on treatments after the <span>$j^\text{th}$</span> allocation step (<span>$N_1(j)+N_2(j) = j, \: j = 1, \ldots, n$</span>).</li><li><span>$\delta_j$</span> is a <em>treatment indicator</em>:</li></ul><p class="math-container">\[\delta_j = \left\{\begin{array}{rl}
1, &amp;\text{if treatment }E \\
0, &amp;\text{if treatment }C
\end{array}\right. .\]</p><p>Under these assumptions, a <em>restricted randomization</em> procedure is defined as</p><p class="math-container">\[\begin{aligned}
\phi_1 &amp;= \Pr(\delta_1 = 1) = 0.5; \\
\phi_j &amp;= \Pr(\delta_j = 1|\delta_1, \ldots, \delta_{j-1}), \: j = 2, \ldots, n.
\end{aligned}\]</p><h1 id="Randomization,-targeting-*unequal*-allocation-in-*two-arm*-trial-and-*equal*/*unequal*-allocation-in-*multi-arm*-trial"><a class="docs-heading-anchor" href="#Randomization,-targeting-*unequal*-allocation-in-*two-arm*-trial-and-*equal*/*unequal*-allocation-in-*multi-arm*-trial">Randomization, targeting <em>unequal</em> allocation in <em>two-arm</em> trial and <em>equal</em>/<em>unequal</em> allocation in <em>multi-arm</em> trial</a><a id="Randomization,-targeting-*unequal*-allocation-in-*two-arm*-trial-and-*equal*/*unequal*-allocation-in-*multi-arm*-trial-1"></a><a class="docs-heading-anchor-permalink" href="#Randomization,-targeting-*unequal*-allocation-in-*two-arm*-trial-and-*equal*/*unequal*-allocation-in-*multi-arm*-trial" title="Permalink"></a></h1><p>The following settings are assumed:</p><ul><li><span>$K$</span> is a number of treatment arms in a trial (<span>$K \geq 2$</span>).</li><li><span>$\mathbf{w} = \left(w_1,\ldots, w_K\right)&#39;$</span> is the <em>fixed allocation ratio</em>, <span>$w_1:\ldots :w_K$</span>, where <span>$w_k$</span>&#39;s are positive, not necessarily equal numbers (usually, integers) with the greatest common divisor of 1.</li><li><span>$\boldsymbol{\rho}  = \left(\rho_1, \ldots, \rho_K\right)&#39;$</span> is a vector of <em>target allocation proportions</em>, where </li></ul><p class="math-container">\[\rho_k = \frac{w_k}{\sum_{k=1}^{K}{w_k}}, 0 \leq \rho_k \leq 1, \text{ and }\sum_{k=1}^K{\rho_k} = 1.\]</p><ul><li><span>$n$</span> is a total <em>sample size</em>.</li><li><span>$\mathbf{N}(j) = \left(N_1(j), \ldots, N_K(j)\right)&#39;$</span> is a vector of <em>treatment numbers</em>, i.e., numbers of subjects <em>allocated</em> to <span>$K$</span> treatments after <span>$j$</span> allocations (<span>$1 \leq j \leq n$</span>). <ul><li>Note that, in general, <span>$N_k(j)$</span>&#39;s are random variables with <span>$\sum_{k = 1}^K{N_k(j)} = j$</span>.</li></ul></li><li><span>$\mathbf{P}(j) = \left(P_1(j), \ldots, P_K(j)\right)&#39;$</span> is a vector of <em>randomization (allocation) probabilities</em> for the <span>$j^\text{th}$</span>subject. <ul><li>Note that <span>$0 \leq P_k(j) \leq 1$</span>, and <span>$\sum_{k = 1}^K{P_k(j)} = 1$</span> for each <span>$j = 1, 2, \ldots, n$</span>. </li><li>Also, note that in general, <span>$\mathbf{P}(j)$</span> depends on <span>$\mathbf{N}(j-1)$</span> (in generalization of Efron&#39;s BCD) or on <span>$\frac{\mathbf{N}(j-1)}{j-1}$</span> (in generalization of Wei&#39;s <em>urn design</em>).</li></ul></li></ul><p>Under these assumptions, a <em>restricted randomization</em> procedure is defined as</p><p class="math-container">\[\begin{aligned}
P_k(1) &amp;= \Pr(\delta_1 = k) = \rho_k, \: k = 1, \ldots, K; \\
P_k(j) &amp;= \Pr(\delta_j = k|\delta_1, \ldots, \delta_{j-1}), \: k = 1, \ldots, K; \: j = 2, \ldots, n.
\end{aligned}\]</p><h1 id="Procedures-implemented-in-the-package"><a class="docs-heading-anchor" href="#Procedures-implemented-in-the-package">Procedures implemented in the package</a><a id="Procedures-implemented-in-the-package-1"></a><a class="docs-heading-anchor-permalink" href="#Procedures-implemented-in-the-package" title="Permalink"></a></h1><h2 id="Completely-Randomized-Design-(CRD)"><a class="docs-heading-anchor" href="#Completely-Randomized-Design-(CRD)">Completely Randomized Design (CRD)</a><a id="Completely-Randomized-Design-(CRD)-1"></a><a class="docs-heading-anchor-permalink" href="#Completely-Randomized-Design-(CRD)" title="Permalink"></a></h2><p>For a <em>two-arm</em> trial and <code>1:1</code> <em>target</em> allocation, every subject is allocated to treatments with a fixed probability</p><p class="math-container">\[\phi_j = 0.5, \: j = 1, \ldots, n.\]</p><p>In case of <em>two-arm</em> trial with <em>unequal</em> allocation or <em>multi-arm</em> trial with <em>equal</em>/<em>unequal</em> allocation, every subject is allocated to treatments with fixed probabilities that are equal to the target allocation proportions:</p><p class="math-container">\[P_k(j) = \rho_k, \: k = 1, \ldots, K; \: j = 1, \ldots, n.\]</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.CRD" href="#Incertus.CRD"><code>Incertus.CRD</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A type of randomization, representing <em><strong>C</strong></em>ompletely <em><strong>R</strong></em>andomized <em><strong>D</strong></em>esign (<em><strong>CRD</strong></em>).</p><p><code>CRD()</code> command initializes a complete randomization procedure, targeting <code>1:1</code> allocation.</p><p><code>CRD(w)</code> command initializes a complete randomization procedure, targeting allocation specified by <code>w</code>.</p><p>An output of both commands is an instance of <code>CRD</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-01-crd.jl#L1-L9">source</a></section></article><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Incertus</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; crd =  CRD()     # complete randomization, targeting 1:1 allocation</code><code class="nohighlight hljs ansi" style="display:block;">CRD: complete randomization procedure, targeting 1:1 allocation in 2-arm trial.</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; w = [1, 2, 3, 4]</code><code class="nohighlight hljs ansi" style="display:block;">4-element Vector{Int64}:
 1
 2
 3
 4</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; crd =  CRD(w)    # complete randomization, targeting allocation specified by w</code><code class="nohighlight hljs ansi" style="display:block;">CRD: complete randomization procedure, targeting 1:2:3:4 allocation in 4-arm trial.</code></pre><h2 id="Permuted-Block-Design-(PBD)"><a class="docs-heading-anchor" href="#Permuted-Block-Design-(PBD)">Permuted Block Design (PBD)</a><a id="Permuted-Block-Design-(PBD)-1"></a><a class="docs-heading-anchor-permalink" href="#Permuted-Block-Design-(PBD)" title="Permalink"></a></h2><p>Treatment assignments are made in blocks of size <span>$bs$</span> (for a <em>two-arm</em> trial and <code>1:1</code> <em>target</em> allocation, <span>$bs= 2\lambda$</span>; otherwise, <span>$bs=\lambda W$</span>, where <span>$W=w_1 + \ldots + w_K$</span> is a sum of elements of vector <span>$\mathbf{w}$</span>, <em>target</em> allocation vector. Here, <span>$\lambda$</span> is a parameter of the <em>PBD</em>, representing the <em>number of minimal balanced sets in the block of size</em> <span>$bs$</span>).</p><p>At the <span>$j^\text{th}$</span> allocation step, let <span>$k^{(j-1)} = \left \lfloor \frac{j-1}{bs}\right\rfloor$</span> (<span>$\lfloor x \rfloor$</span> is a <code>floor</code> function that returns the greatest integer less than or equal to <span>$x$</span>). In essence, <span>$k^{(j-1)}$</span> is the number of complete blocks among the first <span>$j-1$</span> assignments.</p><p>The probabilities of treatment assignments within each block are changed according the current imbalance in a block:</p><ul><li>for a <em>two-arm</em> trial and <code>1:1</code> <em>target</em> allocation,  </li></ul><p class="math-container">\[\phi_j = \frac{0.5bs(1+k^{(j-1)})-N_1(j-1)}{bs(1+k^{(j-1)})-(j-1)}, \: j = 1, \ldots, n;\]</p><ul><li>for a <em>two-arm</em> trial with <em>unequal</em> allocation or <em>multi-arm</em> trial with <em>equal</em>/<em>unequal</em> allocation,</li></ul><p class="math-container">\[P_k(j) = \frac{w_k\lambda(1+k^{(j-1)})-N_k(j-1)}{bs(1+k^{(j-1)})-(j-1)}, k = 1, \ldots, K; \: j = 1, \ldots, n.\]</p><p>See <strong>[Zhao and Weng (2011), page 955, equation (5)]</strong></p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.PBD" href="#Incertus.PBD"><code>Incertus.PBD</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A type of rectricted randomization, representing <em><strong>P</strong></em>ermuted <em><strong>B</strong></em>lock <em><strong>D</strong></em>esign (<em><strong>PBD</strong></em>).</p><p><code>PBD(λ)</code> command initializes a <em>permuted block design</em> with a <em>block size</em>  equal to <code>2λ</code>, targeting <code>1:1</code> allocation.</p><p><code>PBD(w, λ)</code> command initializes a <em>permuted block design</em>  with a parameter <code>λ</code>,  targeting allocation specified by <code>w</code>; block size equals to <code>λ*sum(w)</code>.</p><p>An output of both commands is an instance of <code>PBD</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-02-pbd.jl#L1-L11">source</a></section></article><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Incertus</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; pbd = PBD(1)      # PBD, targeting 1:1 allocation, with a block size equal to 2*1 = 2</code><code class="nohighlight hljs ansi" style="display:block;">PBD(1): restricted randomization procedure, targeting 1:1 allocation in 2-arm trial.</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; pbd = PBD(3)      # PBD, targeting 1:1 allocation, with a block size equal to 2*3 = 6</code><code class="nohighlight hljs ansi" style="display:block;">PBD(3): restricted randomization procedure, targeting 1:1 allocation in 2-arm trial.</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; w = [1, 2, 3, 4]</code><code class="nohighlight hljs ansi" style="display:block;">4-element Vector{Int64}:
 1
 2
 3
 4</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; pbd =  PBD(w, 1)  # PBD, targeting allocation specified by w, with a block size sum(w)</code><code class="nohighlight hljs ansi" style="display:block;">PBD(1): restricted randomization procedure, targeting 1:2:3:4 allocation in 4-arm trial.</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; pbd =  PBD(w, 3)  # PBD, targeting allocation specified by w, with a block size 3*sum(w)</code><code class="nohighlight hljs ansi" style="display:block;">PBD(3): restricted randomization procedure, targeting 1:2:3:4 allocation in 4-arm trial.</code></pre><h2 id="Random-Allocation-Rule-(Rand)"><a class="docs-heading-anchor" href="#Random-Allocation-Rule-(Rand)">Random Allocation Rule (Rand)</a><a id="Random-Allocation-Rule-(Rand)-1"></a><a class="docs-heading-anchor-permalink" href="#Random-Allocation-Rule-(Rand)" title="Permalink"></a></h2><p>A version of PBD, when the block size <span>$bs$</span> equals to the total sample size <span>$n$</span>. At the <span>$j^\text{th}$</span> allocation step, probabilities of treatment assignments are calculated as:</p><ul><li>for a <em>two-arm</em> trial and <code>1:1</code> <em>target</em> allocation,  </li></ul><p class="math-container">\[\phi_j = \frac{0.5n-N_1(j-1)}{n-(j-1)}, \: j = 1, \ldots, n;\]</p><ul><li>for a <em>two-arm</em> trial with <em>unequal</em> allocation or <em>multi-arm</em> trial with <em>equal</em>/<em>unequal</em> allocation,</li></ul><p class="math-container">\[P_k(j) = \frac{nw_k/W-N_k(j-1)}{n-(j-1)}, k = 1, \ldots, K; \: j = 1, \ldots, n,\]</p><p>where <span>$W=w_1 + \ldots + w_K$</span> is a sum of elements of vector <span>$\mathbf{w}$</span>, <em>target</em> allocation vector.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.RAND" href="#Incertus.RAND"><code>Incertus.RAND</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A type of rectricted randomization, representing <em><strong>Rand</strong></em>om Allocation Rule (<em><strong>Rand</strong></em>).</p><p><code>RAND(n)</code> command initializes a <em>random allocation rule</em> , targeting <code>1:1</code> allocation  in a trial with a <em>sample size</em> equal to <code>n</code>.</p><p><code>RAND(w, n)</code> command initializes a <em>random allocation rule</em> , targeting allocation  specified by <code>w</code> in a trial with a <em>sample size</em> equal to <code>n</code>.</p><p>An output of both commands is an instance of <code>RAND</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-03-rand.jl#L1-L11">source</a></section></article><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Incertus</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; rnd = RAND(50)     # RAND, targeting 1:1 allocation, in a trial with 50 subjects</code><code class="nohighlight hljs ansi" style="display:block;">Rand: restricted randomization procedure, targeting 1:1 allocation in 2-arm trial.</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; w = [1, 2, 3, 4]</code><code class="nohighlight hljs ansi" style="display:block;">4-element Vector{Int64}:
 1
 2
 3
 4</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; rnd =  RAND(w, 50) # RAND, targeting allocation specified by w, in a trial with 50 subjects</code><code class="nohighlight hljs ansi" style="display:block;">Rand: restricted randomization procedure, targeting 1:2:3:4 allocation in 4-arm trial.</code></pre><h2 id="Truncated-Binomial-Design-(TBD)"><a class="docs-heading-anchor" href="#Truncated-Binomial-Design-(TBD)">Truncated Binomial Design (TBD)</a><a id="Truncated-Binomial-Design-(TBD)-1"></a><a class="docs-heading-anchor-permalink" href="#Truncated-Binomial-Design-(TBD)" title="Permalink"></a></h2><p>Treatment assignments are made with probability 0.5 until one of the treatments receives its quota of <span>$\frac{n}{2}$</span> subjects; thereafter all remaining assignments are made deterministically to the opposite treatment.</p><p>At the <span>$j^\text{th}$</span>allocation step, let <span>$N_1$</span> and <span>$N_2$</span> be the numbers of subjects allocated to treatments s.t. <span>$N_1+N_2 = j-1.$</span> Then,</p><p class="math-container">\[\phi_j = \left\{\begin{array}{rl}
0.5, &amp; \max(N_1, N_2) &lt; \frac{n}{2} \\
1, &amp; N_1 &lt; N2 \\
0, &amp; N_1 &gt; N2
\end{array}\right. ,\: j = 1, \ldots, n.\]</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.TBD" href="#Incertus.TBD"><code>Incertus.TBD</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A type of rectricted randomization, representing <em><strong>T</strong></em>runcated <em><strong>B</strong></em>inomial <em><strong>D</strong></em>esign (<em><strong>TBD</strong></em>).</p><p><code>TBD(n)</code> command initializes a <em>truncated binomial design</em>, targeting <code>1:1</code> allocation  in a trial with a <em>sample size</em> equal to <code>n</code>.</p><p>An output of the command is an isntance of TBD.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-04-tbd.jl#L1-L8">source</a></section></article><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Incertus</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; tbd = TBD(50)  # TBD, targeting 1:1 allocation, in a trial with 50 subjects</code><code class="nohighlight hljs ansi" style="display:block;">TBD: restricted randomization procedure, targeting 1:1 allocation in 2-arm trial.</code></pre><h2 id="Efron&#39;s-Biased-Coin-Design-(EBCD)"><a class="docs-heading-anchor" href="#Efron&#39;s-Biased-Coin-Design-(EBCD)">Efron&#39;s Biased Coin Design (EBCD)</a><a id="Efron&#39;s-Biased-Coin-Design-(EBCD)-1"></a><a class="docs-heading-anchor-permalink" href="#Efron&#39;s-Biased-Coin-Design-(EBCD)" title="Permalink"></a></h2><p>At any allocation step, if treatment numbers <span>$N_1$</span> and <span>$N_2$</span> are balanced, the next assignment is made with probability 0.5; otherwise, the underrepresented treatment is assigned with probability <span>$p$</span>, where <span>$0.5 \leq p \leq 1$</span> is a fixed and pre-specified parameter that determines the trade-off between balance and randomness.</p><p>At the <span>$j^\text{th}$</span> allocation step, given treatment numbers <span>$N_1$</span> and <span>$N_2$</span>, s.t. <span>$N_1+N_2 = j-1$</span>, and imbalance <span>$d = N_1-N_2$</span>,</p><p class="math-container">\[\phi_j = \left\{\begin{array}{rl}
0.5, &amp; N_1 = N_2\\
p, &amp; N_1 &lt; N2 \\
1-p, &amp; N_1 &gt; N2
\end{array}\right. ,\: j = 1, \ldots, n.\]</p><p>Note that <span>$p=1$</span> corresponds to PBD with block size <span>$b=2$</span>.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.EBCD" href="#Incertus.EBCD"><code>Incertus.EBCD</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A type of rectricted randomization, representing <em><strong>E</strong></em>fron&#39;s <em><strong>B</strong></em>iased <em><strong>C</strong></em>oin <em><strong>D</strong></em>esign (<em><strong>EBCD</strong></em>).</p><p><code>EBCD(p)</code> command initializes <em>Efron&#39;s biased coin design</em> with a parameter equal to <code>p</code>, targeting <code>1:1</code> allocation.</p><p>An output of the command is an isntance of EBCD.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-05-ebcd.jl#L1-L8">source</a></section></article><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Incertus</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; ebcd = EBCD(2//3) # EBCD, targeting 1:1 allocation, with parameter p=2/3</code><code class="nohighlight hljs ansi" style="display:block;">EBCD(2/3): restricted randomization procedure, targeting 1:1 allocation in 2-arm trial.</code></pre><h2 id="Adjustable-Biased-Coin-Design-(ABCD)"><a class="docs-heading-anchor" href="#Adjustable-Biased-Coin-Design-(ABCD)">Adjustable Biased Coin Design (ABCD)</a><a id="Adjustable-Biased-Coin-Design-(ABCD)-1"></a><a class="docs-heading-anchor-permalink" href="#Adjustable-Biased-Coin-Design-(ABCD)" title="Permalink"></a></h2><p>An extension of Efron’s BCD. At the <span>$j^\text{th}$</span> allocation step, given treatment numbers <span>$N_1$</span> and <span>$N_2$</span>, s.t. <span>$N_1+N_2 = j-1$</span>, and imbalance <span>$d = N_1-N_2$</span>,</p><p class="math-container">\[\phi_j = \left\{\begin{array}{rl}
0.5, &amp; |d| &lt;= 1 \\
\frac{|d|^a}{1+|d|^a}, &amp; d &lt; -1 \\
\frac{1}{1+|d|^a}, &amp; d &gt; 1 
\end{array}\right. ,\: j = 1, \ldots, n.\]</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.ABCD" href="#Incertus.ABCD"><code>Incertus.ABCD</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A type of rectricted randomization, representing <em><strong>A</strong></em>djustable <em><strong>B</strong></em>iased <em><strong>C</strong></em>oin <em><strong>D</strong></em>esign (<em><strong>ABCD</strong></em>).</p><p><code>ABCD(a)</code> command initializes <em>adjustable biased coin design</em> with a parameter equal to <code>a</code>,  targeting <code>1:1</code> allocation.</p><p>An output of the command is an isntance of ABCD.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-06-abcd.jl#L1-L8">source</a></section></article><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Incertus</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; abcd = ABCD(2) # ABCD, targeting 1:1 allocation, with parameter a=2</code><code class="nohighlight hljs ansi" style="display:block;">ABCD(2): restricted randomization procedure, targeting 1:1 allocation in 2-arm trial.</code></pre><h2 id="Generalized-Biased-Coin-Design-(GBCD)"><a class="docs-heading-anchor" href="#Generalized-Biased-Coin-Design-(GBCD)">Generalized Biased Coin Design (GBCD)</a><a id="Generalized-Biased-Coin-Design-(GBCD)-1"></a><a class="docs-heading-anchor-permalink" href="#Generalized-Biased-Coin-Design-(GBCD)" title="Permalink"></a></h2><p>A generalization of Efron’s BCD. At the <span>$j^\text{th}$</span> allocation step, given treatment numbers <span>$N_1$</span> and <span>$N_2$</span>, s.t. <span>$N_1+N_2 = j-1$</span>, and imbalance <span>$d = N_1-N_2$</span>,</p><p class="math-container">\[\phi_j = \left\{\begin{array}{rl}
0.5, &amp; j = 1 \\
\frac{N_2^\gamma}{N_1^\gamma+N_2^\gamma}, &amp; j = 1, \ldots, n.
\end{array}\right. \]</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.GBCD" href="#Incertus.GBCD"><code>Incertus.GBCD</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A type of rectricted randomization, representing <em><strong>G</strong></em>eneralized <em><strong>B</strong></em>iased <em><strong>C</strong></em>oin <em><strong>D</strong></em>esign (<em><strong>GBCD</strong></em>).</p><p><code>GBCD(γ)</code> command initializes <em>generalized biased coin design</em> with a parameter equal to <code>γ</code>,  targeting <code>1:1</code> allocation.</p><p>An output of the command is an isntance of GBCD.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-07-gbcd.jl#L1-L7">source</a></section></article><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Incertus</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; gbcd = GBCD(2) # GBCD, targeting 1:1 allocation, with parameter γ=2</code><code class="nohighlight hljs ansi" style="display:block;">GBCD(2): restricted randomization procedure, targeting 1:1 allocation in 2-arm trial.</code></pre><h2 id="Big-Stick-Design-(BSD)"><a class="docs-heading-anchor" href="#Big-Stick-Design-(BSD)">Big Stick Design (BSD)</a><a id="Big-Stick-Design-(BSD)-1"></a><a class="docs-heading-anchor-permalink" href="#Big-Stick-Design-(BSD)" title="Permalink"></a></h2><p>An example of maximum tolerated imbalance (MTI) procedures. It makes prediction of the future treatment allocations more difficult (even knowing the current sizes of the treatment groups) and controls treatment imbalance at a predefined threshold throughout the experiment. A general MTI procedure specifies a certain boundary for treatment imbalance, say <span>$mti$</span>, that cannot be exceeded.</p><p>At the <span>$j^\text{th}$</span> allocation step, given treatment numbers <span>$N_1$</span> and <span>$N_2$</span>, s.t. <span>$N_1+N_2 = j-1$</span>, and imbalance <span>$d = N_1-N_2$</span>,</p><p class="math-container">\[\phi_j = \left\{\begin{array}{rl}
0.5, &amp; |d| &lt; mti \\
0, &amp; d = mti \\
1, &amp; d = -mti 
\end{array}\right. ,\: j = 1, \ldots, n.\]</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.BSD" href="#Incertus.BSD"><code>Incertus.BSD</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A type of rectricted randomization, representing <em><strong>B</strong></em>ig <em><strong>S</strong></em>tick <em><strong>D</strong></em>esign (<em><strong>BSD</strong></em>).</p><p><code>BSD(mti)</code> command initializes <em>big stick design</em> with a parameter equal to <code>mti</code>,  targeting <code>1:1</code> allocation.</p><p>An output of the command is an isntance of BSD.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-08-bsd.jl#L1-L8">source</a></section></article><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Incertus</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; bsd = BSD(3) # BSD, targeting 1:1 allocation, with parameter mti=3</code><code class="nohighlight hljs ansi" style="display:block;">BSD(3): restricted randomization procedure, targeting 1:1 allocation in 2-arm trial.</code></pre><h2 id="Biased-Coin-Design-With-Imbalance-Tolerance-(BCDWIT)"><a class="docs-heading-anchor" href="#Biased-Coin-Design-With-Imbalance-Tolerance-(BCDWIT)">Biased Coin Design With Imbalance Tolerance (BCDWIT)</a><a id="Biased-Coin-Design-With-Imbalance-Tolerance-(BCDWIT)-1"></a><a class="docs-heading-anchor-permalink" href="#Biased-Coin-Design-With-Imbalance-Tolerance-(BCDWIT)" title="Permalink"></a></h2><p>A combination of Efron’s BCD and BSD. At the <span>$j^\text{th}$</span> allocation step, given treatment numbers <span>$N_1$</span> and <span>$N_2$</span>, s.t. <span>$N_1+N_2 = j-1$</span>, and imbalance <span>$d = N_1-N_2$</span>,</p><p class="math-container">\[\phi_j = \left\{\begin{array}{rl}
0.5, &amp; |d| &lt; mti\: \&amp; \: d = 0 \\
p, &amp; |d| &lt; mti \: \&amp; \: d &lt; 0 \\
1-p, &amp; |d| &lt; mti \: \&amp; \: d &gt; 0 \\
0, &amp; d = mti \\
1, &amp; d = -mti 
\end{array}\right. ,\: j = 1, \ldots, n.\]</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.BCDWIT" href="#Incertus.BCDWIT"><code>Incertus.BCDWIT</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A type of rectricted randomization, representing <em><strong>B</strong></em>iased <em><strong>C</strong></em>oin <em><strong>D</strong></em>esign  <em><strong>W</strong></em>ith <em><strong>I</strong></em>mbalance <em><strong>T</strong></em>olerance (<em><strong>BCDWIT</strong></em>).</p><p><code>BCDWIT(p, mti)</code> command initializes <em>biased coin design with imbalance tolerance</em>  with <em>parameters</em> equal to <code>p</code> and <code>mti</code>, targeting <code>1:1</code> allocation.</p><p>An output of the command is an isntance of BCDWIT.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-09-bcdwit.jl#L1-L9">source</a></section></article><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Incertus</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; bcdwit = BCDWIT(2//3, 3) # BCDWIT with p = 2/3 and mti=3, targeting 1:1 allocation</code><code class="nohighlight hljs ansi" style="display:block;">BCDWIT(2/3, 3): restricted randomization procedure, targeting 1:1 allocation in 2-arm trial.</code></pre><h2 id="Block-Urn-Design-(BUD)"><a class="docs-heading-anchor" href="#Block-Urn-Design-(BUD)">Block Urn Design (BUD)</a><a id="Block-Urn-Design-(BUD)-1"></a><a class="docs-heading-anchor-permalink" href="#Block-Urn-Design-(BUD)" title="Permalink"></a></h2><p>This design was proposed by <strong>Zhao and Weng (2011)</strong>, to provide a more random design than the PBD.  Let <span>$N_k(j-1)$</span> denote the number of treatment <span>$k$</span> assignments among first <span>$j-1$</span> subjects, and <span>$k^{(j-1)}=\min\limits_{1 \leq k \leq K} \left \lfloor \frac{N_k(j-1)}{w_k}\right \rfloor$</span> denote the number of minimal balanced sets among the first <span>$j-1$</span> assignments. Then, at the <span>$j^\text{th}$</span> allocation step, probabilities of treatment assignments are calculated as:</p><ul><li>for a <em>two-arm</em> trial and <code>1:1</code> <em>target</em> allocation,  </li></ul><p class="math-container">\[\phi_j = \frac{\lambda+\min(N_1(j-1), N_2(j-1))-N_1(j-1)}{2(\lambda+\min(N_1(j-1), N_2(j-1)))-(j-1)}, \: j = 1, \ldots, n;\]</p><ul><li>for a <em>two-arm</em> trial with <em>unequal</em> allocation or <em>multi-arm</em> trial with <em>equal</em>/<em>unequal</em> allocation,</li></ul><p class="math-container">\[P_k(j) = \frac{w_k(\lambda+k^{(j-1)})-N_k(j-1)}{W(\lambda+k^{(j-1)})-(j-1)}, k = 1, \ldots, K; \: j = 1, \ldots, n,\]</p><p>where <span>$W=w_1 + \ldots + w_K$</span> is a sum of elements of vector <span>$\mathbf{w}$</span>, <em>target</em> allocation vector.</p><p>See <strong>[Zhao and Weng (2011), page 955, equations (2) and (3)]</strong>.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.BUD" href="#Incertus.BUD"><code>Incertus.BUD</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A type of rectricted randomzation, representing <em><strong>B</strong></em>lock <em><strong>U</strong></em>rn <em><strong>D</strong></em>esign (<em><strong>BUD</strong></em>).</p><p><code>BUD(λ)</code> command initializes <em>block urn desin</em> with a parameter equal to <span>$λ$</span>,  targeting <code>1:1</code> allocation.</p><p><code>BUD(w, λ)</code> command initializes <em>block urn desin</em> with a parameter equal to <span>$λ$</span>,  targeting allocation specified by <code>w</code>.</p><p>An output of both commands is an instance of <code>BUD</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-10-bud.jl#L1-L11">source</a></section></article><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Incertus</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; bud = BUD(2)      # BUD, targeting 1:1 allocation (λ=2)</code><code class="nohighlight hljs ansi" style="display:block;">BUD(2): restricted randomization procedure, targeting 1:1 allocation in 2-arm trial.</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; w = [1, 2, 3, 4]</code><code class="nohighlight hljs ansi" style="display:block;">4-element Vector{Int64}:
 1
 2
 3
 4</code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; bud =  BUD(w, 2)  # BUD, targeting allocation specified by w (λ=2)</code><code class="nohighlight hljs ansi" style="display:block;">BUD(2): restricted randomization procedure, targeting 1:2:3:4 allocation in 4-arm trial.</code></pre><h2 id="Ehrenfest-Urn-Design-(EUD)"><a class="docs-heading-anchor" href="#Ehrenfest-Urn-Design-(EUD)">Ehrenfest Urn Design (EUD)</a><a id="Ehrenfest-Urn-Design-(EUD)-1"></a><a class="docs-heading-anchor-permalink" href="#Ehrenfest-Urn-Design-(EUD)" title="Permalink"></a></h2><p>Another example of the maximum tolerated imbalance (MTI) procedure. At the <span>$j^\text{th}$</span> allocation step, given treatment numbers <span>$N_1$</span> and <span>$N_2$</span>, s.t. <span>$N_1+N_2 = j-1$</span>, and imbalance <span>$d = N_1-N_2$</span>,</p><p class="math-container">\[\phi_j = \frac{1}{2}\left(1-\frac{d}{mti}\right) ,\: j = 1, \ldots, n,\]</p><p>where <span>$mti$</span> (<span>$&gt;0$</span>) is a parameter of the procedure.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.EUD" href="#Incertus.EUD"><code>Incertus.EUD</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A type of rectricted randomzation, representing <em><strong>E</strong></em>hrenfest <em><strong>U</strong></em>rn <em><strong>D</strong></em>esign (<em><strong>BUD</strong></em>).</p><p><code>EUD(mti)</code> command initializes <em>Ehrenfest&#39;s urn design</em> with a parameter equal to <span>$mti$</span>,  targeting <code>1:1</code> allocation.</p><p>An output of the command is an isntance of EUD.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-11-eud.jl#L1-L8">source</a></section></article><pre><code class="language-julia-repl hljs" style="display:block;">julia&gt; using Incertus</code><code class="nohighlight hljs ansi" style="display:block;"></code><br/><code class="language-julia-repl hljs" style="display:block;">julia&gt; eud = EUD(2) # EUD, targeting 1:1 allocation (mti=2)</code><code class="nohighlight hljs ansi" style="display:block;">EUD(2): restricted randomization procedure, targeting 1:1 allocation in 2-arm trial.</code></pre><h1 id="Funcions-implemented-to-calculate-allocation-probabilities"><a class="docs-heading-anchor" href="#Funcions-implemented-to-calculate-allocation-probabilities">Funcions implemented to calculate allocation probabilities</a><a id="Funcions-implemented-to-calculate-allocation-probabilities-1"></a><a class="docs-heading-anchor-permalink" href="#Funcions-implemented-to-calculate-allocation-probabilities" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.allocation_prb-Tuple{CRD}" href="#Incertus.allocation_prb-Tuple{CRD}"><code>Incertus.allocation_prb</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Function calculates allocation probabilities for CRD.</p><p><strong>Call</strong></p><ul><li><code>allocation_prb(rnd)</code></li></ul><p><strong>Arguments</strong></p><ul><li><code>rnd::CRD</code>: an object, representing Complete Randomization.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-01-crd.jl#L16-L23">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.allocation_prb-Tuple{PBD, Vector{Int64}}" href="#Incertus.allocation_prb-Tuple{PBD, Vector{Int64}}"><code>Incertus.allocation_prb</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Function calculates allocation probabilities for PBD, given treatment numbers.</p><p><strong>Call</strong></p><ul><li>allocation_prb(rnd, N)</li></ul><p><strong>Arguments</strong></p><ul><li><code>rnd::PBD</code>: an object, representing Permuted Block Design.</li><li><code>N::Vector{Int64}</code>: a vector of current treatment numbers.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-02-pbd.jl#L24-L32">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.allocation_prb-Tuple{RAND, Vector{Int64}}" href="#Incertus.allocation_prb-Tuple{RAND, Vector{Int64}}"><code>Incertus.allocation_prb</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Function calculates allocation probabilities for RAND, given treatment numbers.</p><p><strong>Call</strong></p><ul><li><code>allocation_prb(rnd, N)</code></li></ul><p><strong>Arguments</strong></p><ul><li><code>rnd::RAND</code>: an object, representing Random Allocation Rule.</li><li><code>N::Vector{Int64}</code>: a vector of current treatment numbers.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-03-rand.jl#L20-L28">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.allocation_prb-Tuple{TBD, Vector{Int64}}" href="#Incertus.allocation_prb-Tuple{TBD, Vector{Int64}}"><code>Incertus.allocation_prb</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Function calculates allocation probabilities for TBD, given treatment numbers.</p><p><strong>Call</strong></p><ul><li><code>allocation_prb(rnd, N)</code></li></ul><p><strong>Arguments</strong></p><ul><li><code>rnd::TBD</code>: an object, representing Truncated Binomial Design.</li><li><code>N::Vector{Int64}</code>: a vector of current treatment numbers.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-04-tbd.jl#L25-L33">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.allocation_prb-Tuple{EBCD, Vector{Int64}}" href="#Incertus.allocation_prb-Tuple{EBCD, Vector{Int64}}"><code>Incertus.allocation_prb</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Function calculates allocation probabilities for EBCD, given treatment numbers.</p><p><strong>Call</strong></p><ul><li><code>allocation_prb(rnd, N)</code></li></ul><p><strong>Arguments</strong></p><ul><li><code>rnd::EBCD</code>: an object, representing Efron&#39;s Biased Coin Design.</li><li><code>N::Vector{Int64}</code>: a vector of current treatment numbers.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-05-ebcd.jl#L26-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.allocation_prb-Tuple{ABCD, Vector{Int64}}" href="#Incertus.allocation_prb-Tuple{ABCD, Vector{Int64}}"><code>Incertus.allocation_prb</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Function calculates allocation probabilities for ABCD, given treatment numbers.</p><p><strong>Call</strong></p><ul><li><code>allocation_prb(rnd, N)</code></li></ul><p><strong>Arguments</strong></p><ul><li><code>rnd::ABCD</code>: an object, representing Adjustable Biased Coin Design.</li><li><code>N::Vector{Int64}</code>: a vector of current treatment numbers.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-06-abcd.jl#L26-L34">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.allocation_prb-Tuple{GBCD, Vector{Int64}}" href="#Incertus.allocation_prb-Tuple{GBCD, Vector{Int64}}"><code>Incertus.allocation_prb</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Function calculates allocation probabilities for GBCD, given treatment numbers.</p><p><strong>Call</strong></p><ul><li><code>allocation_prb(rnd, N)</code></li></ul><p><strong>Arguments</strong></p><ul><li><code>rnd::GBCD</code>: an object, representing Generalized Biased Coin Design.</li><li><code>N::Vector{Int64}</code>: a vector of current treatment numbers.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-07-gbcd.jl#L31-L39">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.allocation_prb-Tuple{BSD, Vector{Int64}}" href="#Incertus.allocation_prb-Tuple{BSD, Vector{Int64}}"><code>Incertus.allocation_prb</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Function calculates allocation probabilities for BSD, given treatment numbers.</p><p><strong>Call</strong></p><ul><li><code>allocation_prb(rnd, N)</code></li></ul><p><strong>Arguments</strong></p><ul><li><code>rnd::BSD</code>: an object, representing Big Stick Design.</li><li><code>N::Vector{Int64}</code>: a vector of current treatment numbers.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-08-bsd.jl#L28-L36">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.allocation_prb-Tuple{BCDWIT, Vector{Int64}}" href="#Incertus.allocation_prb-Tuple{BCDWIT, Vector{Int64}}"><code>Incertus.allocation_prb</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Function calculates allocation probabilities for BCDWIT, given treatment numbers.</p><p><strong>Call</strong></p><ul><li><code>allocation_prb(rnd, N)</code></li></ul><p><strong>Arguments</strong></p><ul><li><code>rnd::BCDWIT</code>: an object, representing Biased Coin Design With Imbalance Tolerance.</li><li><code>N::Vector{Int64}</code>: a vector of current treatment numbers.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-09-bcdwit.jl#L30-L38">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.allocation_prb-Tuple{BUD, Vector{Int64}}" href="#Incertus.allocation_prb-Tuple{BUD, Vector{Int64}}"><code>Incertus.allocation_prb</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Function calculates allocation probabilities for BUD, given treatment numbers.</p><p><strong>Call</strong></p><ul><li><code>allocation_prb(rnd, N)</code></li></ul><p><strong>Arguments</strong></p><ul><li><code>rnd::BUD</code>: an object, representing Block Urn Design.</li><li><code>N::Vector{Int64}</code>: a vector of current treatment numbers.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-10-bud.jl#L25-L33">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.allocation_prb-Tuple{EUD, Vector{Int64}}" href="#Incertus.allocation_prb-Tuple{EUD, Vector{Int64}}"><code>Incertus.allocation_prb</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Function calculates allocation probabilities for EUD, given treatment numbers.</p><p><strong>Call</strong></p><ul><li><code>allocation_prb(rnd, N)</code></li></ul><p><strong>Arguments</strong></p><ul><li><code>rnd::EUD</code>: an object, representing Ehrenfest Urn Design.</li><li><code>N::Vector{Int64}</code>: a vector of current treatment numbers.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/rnd-11-eud.jl#L27-L35">source</a></section></article><h1 id="Simulation"><a class="docs-heading-anchor" href="#Simulation">Simulation</a><a id="Simulation-1"></a><a class="docs-heading-anchor-permalink" href="#Simulation" title="Permalink"></a></h1><p>To perform simulations, the following functionality has been implemented:</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.SimulatedRandomization" href="#Incertus.SimulatedRandomization"><code>Incertus.SimulatedRandomization</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A type, representing an output of a simulated randomization procedure.</p><p>A command <code>SimulatedRandomization(trt, prb)</code> initializes an instance of <code>SimulatedRandomization</code>:</p><ul><li><code>trt</code> is a matrix of size <span>$n\times S$</span>, representing treatment assignments;</li><li><code>prb</code> is an array of size <span>$n\times K\times S$</span>, representing allocation probabilities,</li></ul><p>where </p><ul><li><span>$n$</span> is the number of subjects simulated;</li><li><span>$K$</span> is the number of treatments simulated (equal to the length of the target allocation vector);</li><li><span>$S$</span> is the number of simulations performed.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/simulation.jl#L1-L14">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.simulate" href="#Incertus.simulate"><code>Incertus.simulate</code></a> — <span class="docstring-category">Function</span></header><section><div><p>Function simulates randomization procedures <code>simulate(rnd, nsbj, nsim, seed)</code></p><p><strong>Arguments</strong></p><ul><li><code>rnd::Union{CompleteRandomization, RestrictedRandomization}</code>: an object, representing </li></ul><p>a randomization procedure to be simulated, an instance of <code>CompleteRandomization</code> or  <code>RestrictedRandomization</code>.</p><ul><li><code>nsbj::Int64</code>: number of subjects simulated.</li><li><code>nsim::Int64</code>: number of simulations performed.</li><li><code>seed::Int64</code>: a random seed (for reproducibility); a default is set to 314159.</li></ul><p><strong>Result</strong></p><ul><li>an object, representing simlated randomization, an instance of <code>Simulatedrandomization</code>.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/simulation.jl#L37-L51">source</a></section></article><h1 id="Operational-characteristics"><a class="docs-heading-anchor" href="#Operational-characteristics">Operational characteristics</a><a id="Operational-characteristics-1"></a><a class="docs-heading-anchor-permalink" href="#Operational-characteristics" title="Permalink"></a></h1><p>Several measures of imbalance and randomness have been implemented in the package:</p><ul><li>Measures of imbalance:<ul><li><span>$\mathbf{E}\left[|D(j)|\right]$</span> – expected absolute imbalance at the <span>$j^\text{th}$</span> allocation step.</li><li><span>$\mathbf{E}\left[|D(j)|^2\right]=\mathbf{var}\left[D(j)\right]$</span> – variance of imbalance at the <span>$j^\text{th}$</span> allocation step.</li><li><span>$\mathbf{E}\left[\max\limits_{1\leq m \leq j}|D(m)|\right]$</span> – expected maximum imbalance over the first <span>$j$</span> allocation steps.</li><li><span>$Imb(j) = \frac{1}{j}\sum\limits_{m=1}^j\frac{\mathbf{E}\left[|D(m)|^2\right]}{m}$</span> – a cumulative average loss at the <span>$j^\text{th}$</span> allocation step.</li></ul></li></ul><p>Below, there are  functions available for calculating operational characteristics.</p><h2 id="Expected-absolute-imbalance"><a class="docs-heading-anchor" href="#Expected-absolute-imbalance">Expected absolute imbalance</a><a id="Expected-absolute-imbalance-1"></a><a class="docs-heading-anchor-permalink" href="#Expected-absolute-imbalance" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.calc_expected_abs_imb-Tuple{SimulatedRandomization}" href="#Incertus.calc_expected_abs_imb-Tuple{SimulatedRandomization}"><code>Incertus.calc_expected_abs_imb</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Function calculates expected absolute imbalance vs. allocation step.</p><p><strong>Call</strong></p><p><code>calc_expected_abs_imb(sr)</code></p><p><strong>Arguments</strong></p><ul><li><code>sr::SimulatedRandomization</code>: an instance of <code>SimulatedRandomization</code>, an object, </li></ul><p>representing simulation output.</p><p><strong>Result</strong></p><ul><li>A vector of <em>expected absolute imbalance</em> values summarized via simulations.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/op-01-imb.jl#L8-L20">source</a></section></article><h2 id="Variance-of-imbalance"><a class="docs-heading-anchor" href="#Variance-of-imbalance">Variance of imbalance</a><a id="Variance-of-imbalance-1"></a><a class="docs-heading-anchor-permalink" href="#Variance-of-imbalance" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.calc_variance_of_imb-Tuple{SimulatedRandomization}" href="#Incertus.calc_variance_of_imb-Tuple{SimulatedRandomization}"><code>Incertus.calc_variance_of_imb</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Function calculates variance of imbalance vs. allocation step.</p><p><strong>Call</strong></p><p><code>calc_variance_of_imb(sr)</code></p><p><strong>Arguments</strong></p><ul><li><code>sr::SimulatedRandomization</code>: an instance of <code>SimulatedRandomization</code>, an object, </li></ul><p>representing simulation output.</p><p><strong>Result</strong></p><ul><li>A vector of <em>variance of imbalance</em> values summarized via simulations.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/op-01-imb.jl#L34-L46">source</a></section></article><h2 id="Expected-maximum-imbalance-over-first-allocation-steps"><a class="docs-heading-anchor" href="#Expected-maximum-imbalance-over-first-allocation-steps">Expected maximum imbalance over first allocation steps</a><a id="Expected-maximum-imbalance-over-first-allocation-steps-1"></a><a class="docs-heading-anchor-permalink" href="#Expected-maximum-imbalance-over-first-allocation-steps" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.calc_expected_max_abs_imb-Tuple{SimulatedRandomization}" href="#Incertus.calc_expected_max_abs_imb-Tuple{SimulatedRandomization}"><code>Incertus.calc_expected_max_abs_imb</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Function calculates expected maximum absolute imbalance over first allocations vs. allocation step.</p><p><strong>Call</strong></p><p><code>calc_expected_max_abs_imb(sr)</code></p><p><strong>Arguments</strong></p><ul><li><code>sr::SimulatedRandomization</code>: an instance of <code>SimulatedRandomization</code>, an object, </li></ul><p>representing simulation output.</p><p><strong>Result</strong></p><ul><li>A vector of <em>expected maximum absolute imbalance over firat allocations</em> values summarized via simulations.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/op-01-imb.jl#L61-L73">source</a></section></article><h2 id="Expected-maximum-imbalance-over-first-allocation-steps-2"><a class="docs-heading-anchor" href="#Expected-maximum-imbalance-over-first-allocation-steps-2">Expected maximum imbalance over first allocation steps</a><a class="docs-heading-anchor-permalink" href="#Expected-maximum-imbalance-over-first-allocation-steps-2" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.calc_cummean_loss-Tuple{SimulatedRandomization}" href="#Incertus.calc_cummean_loss-Tuple{SimulatedRandomization}"><code>Incertus.calc_cummean_loss</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Function calculates cumulative average loss vs. allocation step.</p><p><strong>Call</strong></p><p><code>calc_expected_abs_imb(sr)</code></p><p><strong>Arguments</strong></p><ul><li><code>sr::SimulatedRandomization</code>: an instance of <code>SimulatedRandomization</code>, an object, </li></ul><p>representing simulation output.</p><p><strong>Result</strong></p><ul><li>A vector of <em>cumulative average loss</em> values summarized via simulations.</li></ul></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/op-01-imb.jl#L93-L105">source</a></section></article><h1 id="Auxiliary-functions"><a class="docs-heading-anchor" href="#Auxiliary-functions">Auxiliary functions</a><a id="Auxiliary-functions-1"></a><a class="docs-heading-anchor-permalink" href="#Auxiliary-functions" title="Permalink"></a></h1><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Incertus.set_label-Tuple{Union{CompleteRandomization, RestrictedRandomization}}" href="#Incertus.set_label-Tuple{Union{CompleteRandomization, RestrictedRandomization}}"><code>Incertus.set_label</code></a> — <span class="docstring-category">Method</span></header><section><div><p>Function sets a label for a randomization procedure.</p><p>An example:</p><pre><code class="language-julia-repl hljs">julia&gt; w = [1, 2, 3, 4]
4-element Vector{Int64}:
 1
 2
 3
 4

julia&gt; dlr_proc = DLR(w, 2)
DLR(2): restricted randomization procedure, targeting 1:2:3:4 allocation in 4-arm trial.

julia&gt; label = set_label(dlr_proc)
&quot;DLR(2)&quot;</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/yevgenryeznik/Incertus.jl/blob/6860fd9c3952cf32afe8ea22eebceaf48c984a28/src/utils.jl#L16-L34">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.1.2 on <span class="colophon-date" title="Monday 22 January 2024 17:21">Monday 22 January 2024</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
